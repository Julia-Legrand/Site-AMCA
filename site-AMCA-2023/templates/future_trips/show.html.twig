{% extends 'base.html.twig' %}

{% block title %}{{ futureTrip.futureTripName }} - Association AMCA 44{% endblock %}

{% block body %}
    <main>
        <h2>{{ futureTrip.futureTripName }}</h2>
        <img src="{{ asset('uploads/images/' ~ futureTrip.futureTripPicture) }}" alt="Photo de la sortie" width="200px">
        <small>Dates : du {{ futureTrip.startDate ? futureTrip.startDate|date('d-m-Y à H:i') : '' }} au {{ futureTrip.endDate ? futureTrip.endDate|date('d-m-Y à H:i') : '' }}</small>
        <small>Budget à prévoir : {{ futureTrip.budget }} euros</small>
        <p>{{ futureTrip.futureTripContent }}</p>
        <div id="mapFutureTrip" class="mapFutureTrip"></div>
        <small>Nombre de places: {{ futureTrip.numberOfPlaces }}</small>
        <a href="{{ path('app_contacts_new') }}" class="btn btn-primary">S'inscrire</a>
        <h4>Adhérents inscrits</h4>
        <ul>
            {% for user in futureTrip.users %}
                <li>{{ user.firstName ~ ' ' ~ user.lastName }}</li>
            {% endfor %}
        </ul>
        <a href="{{ path('asso') }}" class="btn btn-primary">Retour</a>
    </main>

    <!--JAVASCRIPT-->
    <script>
        // Display map for the specific future trip
        var mapFutureTrip = L.map('mapFutureTrip').setView([
            {{ futureTrip.futureTripLon }}, {{ futureTrip.futureTripLat }}
        ], 8);

        var futureTripMarker = L.marker([{{ futureTrip.futureTripLon }}, {{ futureTrip.futureTripLat }}]).addTo(mapFutureTrip);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(mapFutureTrip);

        futureTripMarker.bindPopup("Voyage prévu :  {{ futureTrip.futureTripName }} du {{ futureTrip.startDate | date('d-m-Y') }} au {{ futureTrip.endDate | date('d-m-Y') }}");
    </script>
{% endblock %}