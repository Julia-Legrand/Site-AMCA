{% extends 'base.html.twig' %}

{% block title %}Futures sorties{% endblock %}

{% block body %}
    <h1>Futures sorties</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Nom de la sortie</th>
                <th>Photo principale</th>
                <th>Date de départ</th>
                <th>Date de retour</th>
                <th>Budget à prévoir</th>
                <th>Description</th>
                <th>Nb de places</th>
                <th>Longitude</th>
                <th>Latitude</th>
                <th>S'inscrire</th>
                <th>Adhérents inscrits</th>
                <th>Modifier</th>
            </tr>
        </thead>
        <tbody>
        {% for future_trip in future_trips %}
            <tr>
                <td>{{ future_trip.futureTripName }}</td>
                <td><img src="{{ asset('uploads/images/' ~ future_trip.futureTripPicture) }}"></td>
                <td>{{ future_trip.startDate ? future_trip.startDate|date('d-m-Y' à 'H:i:s') : '' }}</td>
                <td>{{ future_trip.endDate ? future_trip.endDate|date('d-m-Y' à 'H:i:s') : '' }}</td>
                <td>{{ future_trip.budget }}</td>
                <td>{{ future_trip.futureTripContent }}</td>
                <td>{{ future_trip.numberOfPlaces }}</td>
                <td>{{ future_trip.futureTripLon }}</td>
                <td>{{ future_trip.futureTripLat }}</td>
                <td>
                    {% if future_trip.hasAvailablePlaces() %}
                        {% if future_trip.users.contains(app.user) %}
                            <form method="post" action="{{ path('app_future_trips_unregister', {'id': future_trip.id}) }}">
                                <button type="submit">Se désinscrire</button>
                            </form>
                        {% else %}
                            <form method="post" action="{{ path('app_future_trips_register', {'id': future_trip.id}) }}">
                                <button type="submit">S'inscrire</button>
                            </form>
                        {% endif %}
                    {% else %}
                        Complet
                    {% endif %}
                </td>
                <td>
                    <ul>
                        {% for user in future_trip.users %}
                            <li>{{ user.firstName ~ ' ' ~ user.lastName }}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>
                    <a href="{{ path('app_future_trips_edit', {'id': future_trip.id}) }}">Modifier</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="11">Donnée vide</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_future_trips_new') }}">Créer une sortie</a>
{% endblock %}
